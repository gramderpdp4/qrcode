<template>
<div class="page" data-name="item" data-url="/item-page" data-browser-history="true">
    <div class="navbar" style="height: 7vh;">
        <div class="navbar-bg" style="background-color: #212121; color: white;"></div>
        <div class="navbar-inner sliding">
          <div class="left">
            <a class="link back">
              <span class="material-symbols-outlined">
                arrow_back_ios_new
                </span>
            </a>
          </div>
          <div class="title" style="color:white !important; font-size: 3.8vw; font-weight: bold;"></div>
          <a class="right ripple" href="/cart/" data-transition="f7-cover">
            <svg class="f7-icons" viewBox="0 0 24 24" style="fill: white; margin-right: 3vw;"><path d="M21.822 7.431A1 1 0 0 0 21 7H7.333L6.179 4.23A1.994 1.994 0 0 0 4.333 3H2v2h2.333l4.744 11.385A1 1 0 0 0 10 17h8c.417 0 .79-.259.937-.648l3-8a1 1 0 0 0-.115-.921zM17.307 15h-6.64l-2.5-6h11.39l-2.25 6z"></path><circle cx="10.5" cy="19.5" r="1.5"></circle><circle cx="17.5" cy="19.5" r="1.5"></circle></svg>
          </a>
        </div>
      </div>
    <div class="page-content" id="jantarConfirm" style="padding-top: 0;">
        <div class="container__style">
            <div class="container" style="margin: 1.5rem !important;">
                <div class="container-control-item">
                    <img id="image_item" src="https://playum.com.br/qrcode/images/${details.image}"/>
                    <h2 class="name-item">${details.nome}</h2>
                    <h6 class="text-item">${details.price}</h6>
                    <div class="list__icons__item">
                        <a class="icon_one" id="icon_heart_item">
                           
                        </a>
                        <div class="icon_two">
                         <a href="/coments/" id="item-comment">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: white"><path d="M20 2H4c-1.103 0-2 .897-2 2v18l5.333-4H20c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2zm0 14H6.667L4 18V4h16v12z"></path></svg>
                            </a>
                         </div>

                    </div>
                </div>
                <div class="container-text-item">
                    <p id="item_description">${details.description}</p>
                </div>
             <div class="bottom-container">
                <div class="row">
                    <div class="col">
                        <div class="stepper stepper-item stepper-small stepper-fill stepper-round stepper-init color-green-p1">
                            <div class="stepper-button-minus color-green-p1"></div>
                            <div class="stepper-input-wrap color-green-p1">
                              <input id="item__cart-value" type="text" value="1" min="1" max="100" step="1" readonly />
                            </div>
                            <div class="stepper-button-plus color-green-p1"></div>
                          </div>
                        </div>
                        <div class="col">
                            <a href="#" class="button button-fill button-round button-small" id="button_add_item" style="font-size: 0.7rem; width: 43.2vw; text-transform: inherit; background-color: var(--p1-bg-color-principal); color: black;">Adicionar ao carrinho</a>
                        </div>
                    </div>
             </div>
               
                </div>
            </div>
        </div>         
    </div>
</template>
<script>
  export default (props, {$f7, $on, $onBeforeMount, $onMounted, $onBeforeUnmount, $onUnmounted }) => {
    const details = props.user;

    $onMounted(() => {
      const buttonAdd = document.getElementById("button_add_item"),
      itemComments = document.getElementById("item-comment"),
      iconHeart = document.getElementById("icon_heart_item"),
      ImageConvert = "https://playum.com.br/qrcode/images/" + details.image;
      buttonAdd.setAttribute("onclick", "addCart(\'" + details.nome + "\', \'" + details.price + "\')")
      itemComments.setAttribute("data-id-item", details.key)
      iconHeart.setAttribute("onclick", "addLike(this,\'" + details.key + "\',\'" + details.nome + "\',\'" + details.price + "\', \'" + ImageConvert + "\', \'" + details.description + "\')")
      if(sessionStorage.getItem(`like${details.key}`))
          {
            iconHeart.classList.add("liked")
            iconHeart.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: var(--p1-bg-color-principal)"><path d="M20.205 4.791a5.938 5.938 0 0 0-4.209-1.754A5.906 5.906 0 0 0 12 4.595a5.904 5.904 0 0 0-3.996-1.558 5.942 5.942 0 0 0-4.213 1.758c-2.353 2.363-2.352 6.059.002 8.412L12 21.414l8.207-8.207c2.354-2.353 2.355-6.049-.002-8.416z"></path></svg>`
          }else{
            iconHeart.classList.remove("liked")
            iconHeart.innerHTML = `<svg  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 16.114 14.092">
            <path id="Fill-18" d="M-161.843-204.808l-.27-.236c-6.136-4.989-7.788-6.742-7.788-9.608a4.252,4.252,0,0,1,4.248-4.248,4.869,4.869,0,0,1,3.809,1.955,4.869,4.869,0,0,1,3.809-1.955,4.252,4.252,0,0,1,4.248,4.248c0,2.866-1.652,4.619-7.788,9.608l-.27.236Zm-3.809-13.215a3.381,3.381,0,0,0-3.371,3.371c0,2.461,1.551,4.079,7.181,8.7,5.63-4.619,7.181-6.237,7.181-8.7a3.381,3.381,0,0,0-3.371-3.371,4.208,4.208,0,0,0-3.3,1.82l-.506.573-.506-.573a4.209,4.209,0,0,0-3.3-1.82Z" transform="translate(169.9 218.9)" fill="#fff"/>
            </svg>`
      }
    })

    return $render;
  }
</script>
